<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Instana POT/WebSphere-DB2/was-db2-sensors">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Enable Sensors | IBM AIOps Proof of Technology</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/aiops-pot/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/aiops-pot/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/aiops-pot/docs/Instana POT/WebSphere-DB2/was-db2-sensors"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Enable Sensors | IBM AIOps Proof of Technology"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/aiops-pot/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/aiops-pot/docs/Instana POT/WebSphere-DB2/was-db2-sensors"><link data-rh="true" rel="alternate" href="https://github.com/aiops-pot/docs/Instana POT/WebSphere-DB2/was-db2-sensors" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/aiops-pot/docs/Instana POT/WebSphere-DB2/was-db2-sensors" hreflang="x-default"><link rel="stylesheet" href="/aiops-pot/assets/css/styles.db4162a7.css">
<link rel="preload" href="/aiops-pot/assets/js/runtime~main.37c1faa4.js" as="script">
<link rel="preload" href="/aiops-pot/assets/js/main.247d131a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/aiops-pot/"><div class="navbar__logo"><img src="/aiops-pot/img/ibm-watson-logo.png" alt="IBM AIOps" class="themedImage_ToTc themedImage--light_HNdA"><img src="/aiops-pot/img/ibm-watson-logo.png" alt="IBM AIOps" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">AIOps Proof of Technology</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/aiops-pot/docs/intro">Tutorial</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/aiops-pot/docs/intro">AIOps Proof of Technology</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/aiops-pot/docs/category/instana-pot">Instana POT</a><button aria-label="Toggle the collapsible sidebar category &#x27;Instana POT&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/aiops-pot/docs/category/lab-1-cloud-native">Lab 1: Cloud Native</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lab 1: Cloud Native&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/aiops-pot/docs/category/lab-2-websphere--db2">Lab 2: WebSphere &amp; DB2</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lab 2: WebSphere &amp; DB2&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/aiops-pot/docs/Instana POT/WebSphere-DB2/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/aiops-pot/docs/Instana POT/WebSphere-DB2/agent-install">Instana Agent Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/aiops-pot/docs/Instana POT/WebSphere-DB2/define-app-perspective">Create an Application Perspective</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/aiops-pot/docs/Instana POT/WebSphere-DB2/ui-tour">Explore Instana</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/aiops-pot/docs/Instana POT/WebSphere-DB2/was-db2-sensors">Enable Sensors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/aiops-pot/docs/Instana POT/WebSphere-DB2/simulate-failure">Troubleshooting an Issue</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/aiops-pot/docs/category/lab-3-mqace">Lab 3: MQ/ACE</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lab 3: MQ/ACE&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aiops-pot/docs/category/turbonomic-pot">Turbonomic POT</a><button aria-label="Toggle the collapsible sidebar category &#x27;Turbonomic POT&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/aiops-pot/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/aiops-pot/docs/category/instana-pot"><span itemprop="name">Instana POT</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/aiops-pot/docs/category/lab-2-websphere--db2"><span itemprop="name">Lab 2: WebSphere &amp; DB2</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Enable Sensors</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Enable Sensors</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction"><strong>Introduction</strong><a href="#introduction" class="hash-link" aria-label="Direct link to introduction" title="Direct link to introduction">​</a></h2><p>In this section of the lab you will enable the WebSphere Application Server, Java and DB2 sensors in the Instana Agent.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-the-db2-sensor-in-the-instana-configuration"><strong>Enable the DB2 sensor in the Instana Configuration</strong><a href="#enable-the-db2-sensor-in-the-instana-configuration" class="hash-link" aria-label="Direct link to enable-the-db2-sensor-in-the-instana-configuration" title="Direct link to enable-the-db2-sensor-in-the-instana-configuration">​</a></h2><p>When the Instana agent is deployed into an infrastructure containing IBM DB2, it automatically detects the technology but Instana cannot provide automatic DB2 monitoring for licensing reasons. Once you’ve downloaded and placed the driver jar file, the only further setup required is providing credentials to access the IBM DB2 Monitoring information.</p><p>In our scenario, DB2 is installed on a separate system than where we installed the Instana agent. Hence, we will need to manually update the agent configuration file to enable DB2 sensor.</p><p>After Instana deploys its IBM DB2 monitoring, it will immediately map out IBM DB2’s infrastructure. The Instana agent sends all data back to Instana&#x27;s Dynamic Graph model, which stores and contextualizes all collected monitoring data. Typical configuration data collected are:</p><ul><li>Process ID</li><li>Port</li><li>Version</li><li>Start time / Up time</li></ul><p><strong>Some example metrics collected are:</strong></p><ul><li>Connections</li><li>Rows read</li><li>Rows returned</li><li>Commits</li><li>User Calls Commit Rollbacks</li><li>Rollbacks</li><li>SELECTS</li><li>etc.</li></ul><p>Instana collects information about IBM DB2, individual databases, and containers. You will see all that in the following steps.</p><ol><li>Sign in to the Bastion host and select the Terminal icon from the Activities menu. </li><li>ssh to the ipot-was Virtual Machine<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -p 2022 cocuser@ipot-was</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><ol start="3"><li><p>Sudo to the root user</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo -i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>The Following command will update the configuration.yaml file to enable the DB2 sensor</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt; EOF &gt;&gt; /opt/instana/agent/etc/instana/configuration.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># DB2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com.instana.plugin.db2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Local monitoring configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  local: # multiple local configurations supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - instance: &#x27;db2inst1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    port: &#x27;50000&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user: &#x27;db2inst1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password: &#x27;#PASSWORD#&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    poll_rate: 5 # seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    databases:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &#x27;TRADEDB&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Update the password for the db2inst1 user using the password in the credentials.pdf file</p></li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sed -i.bak &quot;s|#PASSWORD#|&lt;Password from credentials.pdf&gt;|g&quot; /opt/instana/agent/etc/instana/configuration.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To verify the Sensor has been enabled, you can view the Instana agent log file. The Output should indicate the Sensor is enabled for the <strong>TRADEDB</strong> DB2 database</p><p>Enter the following command and press enter.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> tail -f /opt/instana/agent/data/log/agent.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p> <img loading="lazy" alt="DB2_Sensor_Log" src="/aiops-pot/assets/images/db2_sensor_log-d55f3e0c8e0ffb9bc92c56ecde703ebb.png" width="917" height="439" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="verify-the-db2-metrics"><strong>Verify the DB2 Metrics</strong><a href="#verify-the-db2-metrics" class="hash-link" aria-label="Direct link to verify-the-db2-metrics" title="Direct link to verify-the-db2-metrics">​</a></h2><p>In this section you will look at the DB2 metrics that have been captured by the sensor.</p><ol><li>Navigate to the <strong>Infrastructure</strong> icon on the Instana left navigation menu and hover over the <strong>ipot-was</strong> infrastructure tower and select <strong>DB2 TRADEDB</strong> service. Selet Open Dashboard link to load the DB2 Metrics Dashboard page.</li></ol><p><img loading="lazy" alt="DB2_Sensor_Infrastructure" src="/aiops-pot/assets/images/db2_sensor_infrastructure-39797bc3f975fb28fffad3225ef689c3.png" width="2092" height="1204" class="img_ev3q"></p><p>  The <strong>Dashboard</strong> shows various metrics captured by the Sensor.</p><p>  The <strong>Connections</strong> section will show the number of open connections to the Database based on the selected time.</p><p>  <img loading="lazy" alt="DB2_Connections" src="/aiops-pot/assets/images/db2_connections-1697b3a8e6c9ba0d2620d0f11e53a0c6.png" width="2590" height="1208" class="img_ev3q"></p><p>  The <strong>Table Spaces</strong> section shows the table space names and usage. A Custom Event can be created to monitor and set of an alert when the tables spaces are getting close to full capacity.</p><p>  <img loading="lazy" alt="DB2_TableSpaces" src="/aiops-pot/assets/images/db2_tablespaces-46096d928f0bc1147cddae442af169bb.png" width="2580" height="940" class="img_ev3q"></p><p>The <strong>Rows and Commits/Rollbacks</strong> views show the number of rows read from the database and commited.</p><p>  <img loading="lazy" alt="DB2_Rows_Commits" src="/aiops-pot/assets/images/db2_rows_commit-4c5222c3e70a118b728b9f8003a9add7.png" width="2604" height="1642" class="img_ev3q"></p><p>Scroll down further until you see the <strong>Top Total CPU</strong>.  This section show the top executing SQL statments and the Total CPU for each.
<img loading="lazy" alt="DB2_Top_SQL" src="/aiops-pot/assets/images/db2_top_sql-f9c468b842bf5ed43f860b897f494efb.png" width="2572" height="1636" class="img_ev3q"></p><p>Select the SQL Statement with the high number of Rows read and CPU consumtion to see the detailed SQL statement and graph based on the selected timeline.</p><p><img loading="lazy" alt="DB2_Top_SQL_Detail" src="/aiops-pot/assets/images/db2_top_sql_detail-751c75b3e4b79d4760f079a102629de6.png" width="2534" height="1640" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="websphere-application-server-pmi-metrics"><strong>WebSphere Application Server PMI metrics</strong><a href="#websphere-application-server-pmi-metrics" class="hash-link" aria-label="Direct link to websphere-application-server-pmi-metrics" title="Direct link to websphere-application-server-pmi-metrics">​</a></h2><ol><li><p>Login to the WebSphere Admin Console <strong>http://ipot-was:9060/ibm/console</strong>
Enter the user: <strong>admin</strong> and password: <strong>refer to the credentials.pdf file</strong></p></li><li><p>Navigate to <strong>Monitoring and Tuning</strong> and select <strong>Performance Monitoring Infrastructure (PMI)</strong></p></li><li><p>Select <strong>server1</strong> </p><p><img loading="lazy" alt="PMI_Server1" src="/aiops-pot/assets/images/pmi_server1-834d88d0a2260272f8a9b2f54abf1dbe.png" width="1345" height="551" class="img_ev3q"></p></li><li><p>In the General Properties section, select the <strong>Enable Performance Monitoring Infrastucture</strong> checkbox and Select the <strong>Basic</strong> option</p></li><li><p>Click <strong>Apply</strong> and <strong>Save</strong> changes to the master configuration</p></li></ol><p><img loading="lazy" alt="Enable_PMI" src="/aiops-pot/assets/images/enable_pmi-f1bd1711eaad435abccf7093334c5166.png" width="1360" height="552" class="img_ev3q"></p><ol start="4"><li>Restart the WebSphere Application Server by sunning the following command in the terminal</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart was</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-the-java-and-websphere-application-sensors-in-the-instana-configuration"><strong>Enable the Java and WebSphere Application sensors in the Instana Configuration</strong><a href="#enable-the-java-and-websphere-application-sensors-in-the-instana-configuration" class="hash-link" aria-label="Direct link to enable-the-java-and-websphere-application-sensors-in-the-instana-configuration" title="Direct link to enable-the-java-and-websphere-application-sensors-in-the-instana-configuration">​</a></h2><p>In this section you will enable the WebSphere Application Server and Java Sensors</p><ol><li>The Following command will update the configuration.yaml file to enable the WebSphere Application Server and Java tracing sensors</li></ol><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt; EOF &gt;&gt; /opt/instana/agent/etc/instana/configuration.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Java Profiling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com.instana.plugin.profiling.java:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Java &amp; Custom JMX</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com.instana.plugin.java:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> name-properties:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &#x27;StockTrader-PoT&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &#x27;PoT&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Java Tracing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com.instana.plugin.javatrace:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   instrumentation:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    opentracing: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#IBM WebSphere Application Server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">com.instana.plugin.websphere:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_pmi: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Navigate to the <strong>Infrastructure</strong> icon in the Instana left navigation and select the <strong>Websphere servic</strong>e in the ipot-was services tower. Select <strong>Open Dashboad</strong> to open the WebSphere Application Server dashboard.</li></ol><p><img loading="lazy" alt="WebSphere_Infrastructure" src="/aiops-pot/assets/images/websphere_infrastructure-a40460a6cd3cb8e424d8e8b2daa93ca0.png" width="2320" height="1462" class="img_ev3q"></p><ol start="3"><li>The <strong>Web Contaainer</strong> threads can be monitored in the <strong>Threads pools</strong> section. It shows the number of active threads and pool size</li></ol><p><img loading="lazy" alt="WebSphere_PMI" src="/aiops-pot/assets/images/websphere_pmi-0aeed7200918f8c6f6b80c2745fae203.png" width="2540" height="1462" class="img_ev3q"></p><ol start="4"><li><p>Select the <strong>Trade#tradeWeb.war</strong> application in the <strong>Web modules</strong> section to monitor the sessions and servlet request and Average Response times.</p><p><img loading="lazy" alt="WebSphere_PMI_Webmodule" src="/aiops-pot/assets/images/websphere_pmi_webmodule-f15b94dbae59375198611ee49ce75419.png" width="2616" height="1600" class="img_ev3q"></p></li><li><p>The <strong>EJB Modules</strong> section lists the EJB Beans and average response times.</p><p><img loading="lazy" alt="WebSphere_PMI_EJBmodule" src="/aiops-pot/assets/images/websphere_pmi_ejbmodule-65a597bf5dd8c85af31442b20824eb0f.png" width="1547" height="819" class="img_ev3q"></p></li><li><p>The <strong>Transations</strong> section shows Active and Commited transaction counts.</p><p><img loading="lazy" alt="WebSphere_PMI_Transactions" src="/aiops-pot/assets/images/websphere_pmi_transactions-26a3e86d183ac7d46109b039cfb78f81.png" width="1554" height="805" class="img_ev3q"></p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-application-mointoring-and-tracing"><strong>Java application Mointoring and Tracing</strong><a href="#java-application-mointoring-and-tracing" class="hash-link" aria-label="Direct link to java-application-mointoring-and-tracing" title="Direct link to java-application-mointoring-and-tracing">​</a></h2><ol><li><p>Navigation to the <strong>JVM</strong> process by selecting the <strong>TradeWeb Service</strong> and select the <strong>Stack, infrastructure</strong> tab. Select the <strong>bootststrap</strong> JVM process to open the JVM dashboard.</p><p><img loading="lazy" alt="JVM_process" src="/aiops-pot/assets/images/jvm_process-f782cd6c1c0b2ff35e05e5552d29a09f.png" width="1552" height="747" class="img_ev3q"></p></li><li><p>The <strong>Threads</strong> section shows the number of running threads and the count of Threads in wait-time.</p></li></ol><p><img loading="lazy" alt="JVM_Threads" src="/aiops-pot/assets/images/jvm_threads-52082bd2d9bb98882ecd560c3094fb53.png" width="1556" height="798" class="img_ev3q"></p><ol start="3"><li>The <strong>Heap Memory</strong> section shows the Heap size and Heap in-use. This is a indicator of the the frequncy of Garbage Collection cycles and it&#x27;s impact to application performace.</li></ol><p><img loading="lazy" alt="JVM_Threads_Heap" src="/aiops-pot/assets/images/jvm_threads_heap-bd522f33141891e2172679ebdddb4833.png" width="1561" height="689" class="img_ev3q"></p><ol><li>The <strong>Garbage Collection</strong> section shows the collectors and the frequency of activation and runtime.</li></ol><p><img loading="lazy" alt="JVM_Garbage_Collection" src="/aiops-pot/assets/images/jvm_garbage_collection-5bc611a4b877238963836ef568fea802.png" width="1558" height="710" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-profiling"><strong>Code Profiling</strong><a href="#code-profiling" class="hash-link" aria-label="Direct link to code-profiling" title="Direct link to code-profiling">​</a></h2><p>Instana AutoProfile™ is an an automated and continuous production profiler which enables you to continuously analyze code-level performance in production without negatively impacting production applications.</p><p>In most instances, a profiler is used by developers to identify performance issues or bottlenecks in their code. Profilers are designed to enable developers to dig all the way down to the individual line of code that is running slow, or is resource intensive. As powerful as profiling can be to identify code optimization opportunities, it is often only used by developers in dev environments after there is already a serious issue. Even if a developer wanted to run profiling in production, it can be difficult at best to get access to production to get a profiler attached.</p><p>Instana AutoProfile™ attaches itself to the running process automatically with no restarts or reconfiguration required. With AutoProfile, users are able to continuously analyze code-level performance, discover bottlenecks in production code, visualize performance with a flame graph, and then dig deep into the application’s ‘hot paths’.</p><p>In this section, we will profile the code in the stock Trader application to analyze the CPU and wait times in the code for an Endpoint.</p><ol><li>Select the <strong>Stock Trader</strong> Application Perspective. Set the <strong>Time Picker</strong> to a shorter duration or <strong>Set Time</strong> window to 2 to 3 minutes for executing following steps. </li></ol><p><img loading="lazy" alt="Codeprofile_Calls" src="/aiops-pot/assets/images/codeprofile_calls-450371afb94f2038f3b09135e7e0e074.png" width="1361" height="693" class="img_ev3q"></p><ol start="2"><li>Highlight a range in the calls section and select the <strong>Analyze</strong> option.</li></ol><p><img loading="lazy" alt="Codeprofile_Analyze" src="/aiops-pot/assets/images/codeprofile_analyze-a8dcff77358f55b0de54743d5174d43a.png" width="1352" height="618" class="img_ev3q"></p><ol start="3"><li>Select the <strong>HTTP Status 200</strong> group and select the <strong>GET /trade/scenario&quot;</strong> Endpoint</li></ol><p><img loading="lazy" alt="Codeprofile_Getcalls" src="/aiops-pot/assets/images/codeprofile_getcalls-e0fccd01035bb1e1c564ebc623474019.png" width="1347" height="810" class="img_ev3q"></p><ol start="4"><li>The Call detail page will show the Endpont trace and includes a profiling section on the right. This view shows the highest CPU consuming code Hotspots. Select the <strong>Analyze profiles</strong> link.</li></ol><p><img loading="lazy" alt="Codeprofile_Hotspots" src="/aiops-pot/assets/images/codeprofile_hotspots-76e8ec8dc644c00ba5eaa7201c2912e9.png" width="1454" height="879" class="img_ev3q"></p><ol start="5"><li>The view shows a timeline summary of the System and User CPU. Highlight the section were the CPU User is at its peak and Select <strong>Analyze</strong>.</li></ol><p><img loading="lazy" alt="Codeprofile_Cpuuser_Summary" src="/aiops-pot/assets/images/cpuuser_summary-7829231f2656e6f2f1a5880602cf7bd7.png" width="1414" height="690" class="img_ev3q"></p><ol start="6"><li>The <strong>CPU HotSpots</strong> section now shows the code that is executed for the seclected range. </li></ol><p><img loading="lazy" alt="Codeprofile_Cpu_user_Hotspots" src="/aiops-pot/assets/images/cpu_user_hotspots-ff98814c31d2574dc7f8d1632b19f7a6.png" width="1448" height="876" class="img_ev3q"></p><ol start="7"><li>Select the <strong>CPU</strong> tab to view the Flame Graph that highlights the code calls causing the high CPU usage. Select the red highlighted hotspot to load the TreeView for the code consuming the CPU respurces. </li></ol><p><img loading="lazy" alt="Codeprofile_Flame" src="/aiops-pot/assets/images/codeprofile_flame-82b9b27f6118585316da64c8ea0b4c8e.png" width="1445" height="908" class="img_ev3q"></p><ol start="8"><li>The <strong>Tree View</strong> shows the request to authenticate is causing high amount of CPU usage. In the next section we will look at how to troubleshoot and resolve this issue.</li></ol><p><img loading="lazy" alt="Codeprofile_TreeView" src="/aiops-pot/assets/images/codeprofile_treeview-55cf8c75e5804ced430f1a7959c3bc4a.png" width="1465" height="841" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting"><strong>Troubleshooting</strong><a href="#troubleshooting" class="hash-link" aria-label="Direct link to troubleshooting" title="Direct link to troubleshooting">​</a></h2><p><strong>Issue</strong>: While getting to WAS console, the    connection times out.</p><p>  <strong>Solution</strong>: You need to restart WAS. From <strong>ipot-was</strong> system run </p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> systemctl restart was</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  Wait for WAS to restart successfully. Make sure it is not hung during the process.</p><p>   Now try accessing the WAS console. With correct userid/password you should be able to login.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/aiops-pot/docs/Instana POT/WebSphere-DB2/ui-tour"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Explore Instana</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/aiops-pot/docs/Instana POT/WebSphere-DB2/simulate-failure"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Troubleshooting an Issue</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight"><strong>Introduction</strong></a></li><li><a href="#enable-the-db2-sensor-in-the-instana-configuration" class="table-of-contents__link toc-highlight"><strong>Enable the DB2 sensor in the Instana Configuration</strong></a></li><li><a href="#verify-the-db2-metrics" class="table-of-contents__link toc-highlight"><strong>Verify the DB2 Metrics</strong></a></li><li><a href="#websphere-application-server-pmi-metrics" class="table-of-contents__link toc-highlight"><strong>WebSphere Application Server PMI metrics</strong></a></li><li><a href="#enable-the-java-and-websphere-application-sensors-in-the-instana-configuration" class="table-of-contents__link toc-highlight"><strong>Enable the Java and WebSphere Application sensors in the Instana Configuration</strong></a></li><li><a href="#java-application-mointoring-and-tracing" class="table-of-contents__link toc-highlight"><strong>Java application Mointoring and Tracing</strong></a></li><li><a href="#code-profiling" class="table-of-contents__link toc-highlight"><strong>Code Profiling</strong></a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight"><strong>Troubleshooting</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/docs/en/obi/current" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.turbonomic.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Turbonomic<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 IBM.</div></div></div></footer></div>
<script src="/aiops-pot/assets/js/runtime~main.37c1faa4.js"></script>
<script src="/aiops-pot/assets/js/main.247d131a.js"></script>
</body>
</html>